<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:json-logger="http://www.mulesoft.org/schema/mule/json-logger"
	xmlns:email="http://www.mulesoft.org/schema/mule/email" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:sftp="http://www.mulesoft.org/schema/mule/sftp"
	xmlns:anypoint-mq="http://www.mulesoft.org/schema/mule/anypoint-mq" xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/email http://www.mulesoft.org/schema/mule/email/current/mule-email.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd
http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd
http://www.mulesoft.org/schema/mule/anypoint-mq http://www.mulesoft.org/schema/mule/anypoint-mq/current/mule-anypoint-mq.xsd
http://www.mulesoft.org/schema/mule/sftp http://www.mulesoft.org/schema/mule/sftp/current/mule-sftp.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/json-logger http://www.mulesoft.org/schema/mule/json-logger/current/mule-json-logger.xsd">
	<http:listener-config name="HTTP_Listener_config" doc:name="HTTP Listener config" doc:id="5a0c7908-88d5-413a-a11a-74b8ac716443" >
		<http:listener-connection host="${http.host}" port="${http.port}" readTimeout="${http.timeout}"/>
	</http:listener-config>
	<secure-properties:config name="Secure_Properties_Config" doc:name="Secure Properties Config" doc:id="b3278e6c-459a-4269-8564-351b87fbb755" file="properties\local.yaml" key="PanasonicDev2022" />
	<!-- <sftp:config name="SFTP_Config" doc:name="SFTP Config" doc:id="2623b085-edf3-46a9-be94-9e99d2987151" >
		<sftp:connection host="10.86.48.62" username="mule2Spana" password="3Vn13MbC4L4dxMSd" />
	</sftp:config>
	<sftp:config name="SFTP_Config1" doc:name="SFTP Config" doc:id="f7c98296-0dbe-449b-8c4a-bc230ca81b0f" >
		<sftp:connection host="LP-SF-0X106752" username="Sadhana.C" password="s$sBj=A5" />
	</sftp:config> -->
	<file:config name="File_Config" doc:name="File Config" doc:id="c1712bae-a40d-4f3e-9493-896283df011f" />
	<email:smtp-config name="Email_SMTP" doc:name="Email SMTP" doc:id="2701e330-37bc-4e10-9321-089b424f2950" >
		<email:smtp-connection host="smtp.gmail.com" port="587" user="${emailSMTP.user}" password="${emailSMTP.password}">
			<email:properties >
				<email:property key="mail.smtp.starttls.enable" value="true" />
			</email:properties>
		</email:smtp-connection>
	</email:smtp-config>
	<anypoint-mq:config name="Anypoint_MQ_Config" doc:name="Anypoint MQ Config" doc:id="6a6b2ac3-394f-41bb-9287-8ae08fb8837b" >
		<anypoint-mq:connection clientId="${email.clientid}" clientSecret="${email.clientsecret}" url="${email.url}"/>
	</anypoint-mq:config>
	<configuration-properties doc:name="Configuration properties" doc:id="b3c36f58-d8e5-46fe-9f3b-6084eafd8249" file="properties\local.yaml" />
	<json-logger:config name="JSON_Logger_Config1" doc:name="JSON Logger Config" doc:id="5976f59f-0c07-43df-960c-67e825414616" environment="${json.logger.env}" />
	<error-handler name="global-exception-strategy" doc:id="06ad8d3c-b5eb-454f-aa23-d701fa59e99a" >
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="87f6c976-86fe-4ee4-8baa-4675e5e2bc5b" type="APIKIT:BAD_REQUEST">
			<ee:transform doc:name="Transform Message" doc:id="e412592a-959f-420c-9f88-14a442701b62">
				<ee:message>
					<ee:set-payload resource="dwl/errorBadRequest.dwl" />
				</ee:message>
				<ee:variables>
					<ee:set-variable variableName="httpStatus"><![CDATA[400]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="241f1568-c524-4968-9599-52c96f199c1b" type="APIKIT:NOT_FOUND">
			<ee:transform doc:name="Transform Message" doc:id="20897f16-fa65-47ef-9993-9fcf3989e6e9" >
				<ee:message >
					<ee:set-payload resource="dwl/errorNotFound.dwl" />
				</ee:message>
				<ee:variables >
					<ee:set-variable variableName="httpStatus" ><![CDATA[404]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="0443231a-4082-48d2-81ae-df0dce691d1e" type="APIKIT:METHOD_NOT_ALLOWED">
			<ee:transform doc:name="Transform Message" doc:id="c5bc730a-c17c-4e05-8c2f-46f8a6529f6a" >
				<ee:message >
					<ee:set-payload resource="dwl/errorMethodNotAllowed.dwl" />
				</ee:message>
				<ee:variables >
					<ee:set-variable variableName="httpStatus" ><![CDATA[405]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="9f462abb-a5c7-4145-9784-897f78807e2c" type="APIKIT:NOT_ACCEPTABLE">
			<ee:transform doc:name="Transform Message" doc:id="c4714995-1d9e-4de3-89b2-e4ed026373ee" >
				<ee:message >
					<ee:set-payload resource="dwl/errorNotAcceptable.dwl" />
				</ee:message>
				<ee:variables >
					<ee:set-variable variableName="httpStatus" ><![CDATA[406]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="daedbc5c-ce81-4a59-b55c-5e45ed6d1394" type="APIKIT:UNSUPPORTED_MEDIA_TYPE">
			<ee:transform doc:name="Transform Message" doc:id="3bf57252-b6aa-400e-a665-67c235d236b7" >
				<ee:message >
					<ee:set-payload resource="dwl/errorUnsupportedMediaType.dwl" />
				</ee:message>
				<ee:variables >
					<ee:set-variable variableName="httpStatus" ><![CDATA[415]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="4b67fad7-cce7-4335-97e1-cfc9ec93e39c" type="APIKIT:NOT_IMPLEMENTED">
			<ee:transform doc:name="Transform Message" doc:id="845dbc42-bacc-4cb9-96b7-1ecdb46bf17a" >
				<ee:message >
					<ee:set-payload resource="dwl/errorNotImplemented.dwl" />
				</ee:message>
				<ee:variables >
					<ee:set-variable variableName="httpStatus" ><![CDATA[501]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="e80b8a14-000b-4921-96d2-5581b88057c5" type="MULE:EXPRESSION">
			<ee:transform doc:name="Transform Message" doc:id="e1a77eee-068e-4f72-bcc2-4117c7f6d3af" >
				<ee:message >
					<ee:set-payload resource="dwl/errorExpression.dwl" />
				</ee:message>
				<ee:variables >
					<ee:set-variable variableName="httpStatus" ><![CDATA[500]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="140afd99-31cb-44a8-b41d-8ce0cc15becf" type="ANY">
			<ee:transform doc:name="Transform Message" doc:id="076b02f6-8f60-469c-9b4a-22eb26d92099" >
				<ee:message >
					<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
  "errorCode": 500,
  "errorMessage": "Unknown Error",
  "correlationID": vars.correlationID,
  "timestamp": (now() as String{format:'yyyy-MM-dd-hh-mm-ss'})
}]]></ee:set-payload>
				</ee:message>
				<ee:variables >
					<ee:set-variable variableName="httpStatus" ><![CDATA[500]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</on-error-propagate>
	</error-handler>
</mule>
